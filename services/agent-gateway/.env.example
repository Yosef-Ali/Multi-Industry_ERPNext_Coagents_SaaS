# T147: ERPNext CoAgents - Agent Gateway Environment Configuration
# Updated with Universal AI Provider System support

# =============================================================================
# AI PROVIDER CONFIGURATION (T145, T146, T147)
# =============================================================================

# AI Provider Selection
# Options: 'openrouter' | 'cloudflare' | 'auto'
# - 'openrouter': Use OpenRouter exclusively (requires API key)
# - 'cloudflare': Use Cloudflare Workers AI exclusively (requires Workers environment)
# - 'auto': Automatically select best provider based on availability
AI_PROVIDER=auto

# Free Tier Preference
# Set to 'true' to prefer free Cloudflare Workers AI when available
# Set to 'false' to prefer premium OpenRouter (higher quality)
PREFER_FREE_TIER=false

# Maximum acceptable cost per 1K tokens (optional)
# Provider factory will try to select models under this cost
# MAX_COST_PER_1K=0.001

# =============================================================================
# OPENROUTER CONFIGURATION (Optional if using Cloudflare)
# =============================================================================

# OpenRouter API Key
# Get your key at: https://openrouter.ai/keys
# Format: sk-or-v1-...
OPENROUTER_API_KEY=sk-or-v1-your-api-key-here

# OpenRouter Model
# Cost-effective options:
#   - mistralai/mistral-7b-instruct ($0.0002/1K tokens)
#   - meta-llama/llama-3-8b-instruct ($0.0002/1K tokens)
#   - anthropic/claude-3-haiku ($0.00025/1K tokens)
# Premium options:
#   - anthropic/claude-3.5-sonnet ($0.003/$0.015 per 1K tokens)
#   - openai/gpt-4o ($0.005/$0.015 per 1K tokens)
OPENROUTER_MODEL=mistralai/mistral-7b-instruct

# OpenRouter Base URL (usually don't need to change)
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# OpenRouter HTTP Referer (optional, for ranking/tracking)
OPENROUTER_HTTP_REFERER=https://erpnext-coagents.dev

# OpenRouter App Title (optional, for tracking)
OPENROUTER_APP_TITLE=ERPNext CoAgents

# =============================================================================
# CLOUDFLARE WORKERS AI CONFIGURATION (Free Tier)
# =============================================================================

# Cloudflare Workers AI Model
# Free tier options (all $0/1K tokens):
#   - @cf/meta/llama-3.1-8b-instruct (recommended, latest)
#   - @cf/meta/llama-3-8b-instruct
#   - @cf/mistral/mistral-7b-instruct-v0.1 (fast)
#   - @cf/qwen/qwen1.5-14b-chat-awq (multilingual, 14B)
CLOUDFLARE_MODEL=@cf/meta/llama-3.1-8b-instruct

# Note: Cloudflare Workers AI binding is configured in wrangler.toml:
#   [ai]
#   binding = "AI"

# =============================================================================
# ERPNEXT CONFIGURATION
# =============================================================================

# ERPNext API URL
# Your ERPNext instance URL
ERPNEXT_API_URL=https://your-erpnext-instance.com

# ERPNext API Credentials
# Get these from ERPNext: User Menu â†’ API Access
ERPNEXT_API_KEY=your-api-key
ERPNEXT_API_SECRET=your-api-secret

# For testing without ERPNext (uses mock data)
# USE_MOCK_ERPNEXT=true

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================

# Gateway Port
GATEWAY_PORT=3000

# Gateway Host
GATEWAY_HOST=0.0.0.0

# =============================================================================
# SECURITY
# =============================================================================

# Session Secret
# Generate with: openssl rand -base64 32
# IMPORTANT: Change this in production!
SESSION_SECRET=change-this-in-production-use-openssl-rand-base64-32

# Allowed Origins (comma-separated)
# Frontend URLs that can access this API
ALLOWED_ORIGINS=http://localhost:3000,https://your-frontend.com

# =============================================================================
# OPTIONAL
# =============================================================================

# Environment
# Options: 'development' | 'production' | 'test'
NODE_ENV=development

# Debug Mode
# Set to 'true' for verbose logging
DEBUG=false

# =============================================================================
# CLOUDFLARE WORKERS SECRETS (Set via wrangler secret put)
# =============================================================================

# When deploying to Cloudflare Workers, set secrets using:
#
#   pnpm dlx wrangler secret put OPENROUTER_API_KEY
#   pnpm dlx wrangler secret put ERPNEXT_API_KEY
#   pnpm dlx wrangler secret put ERPNEXT_API_SECRET
#   pnpm dlx wrangler secret put SESSION_SECRET
#
# Non-secret environment variables go in wrangler.toml [vars] section

# =============================================================================
# CONFIGURATION EXAMPLES
# =============================================================================

# Example 1: Free Tier Only (Development)
# AI_PROVIDER=cloudflare
# CLOUDFLARE_MODEL=@cf/meta/llama-3.1-8b-instruct
# (No OpenRouter API key needed)

# Example 2: Premium Only (Production)
# AI_PROVIDER=openrouter
# OPENROUTER_API_KEY=sk-or-v1-...
# OPENROUTER_MODEL=anthropic/claude-3.5-sonnet

# Example 3: Hybrid with Fallback (Recommended)
# AI_PROVIDER=auto
# OPENROUTER_API_KEY=sk-or-v1-...
# OPENROUTER_MODEL=mistralai/mistral-7b-instruct
# CLOUDFLARE_MODEL=@cf/meta/llama-3.1-8b-instruct
# PREFER_FREE_TIER=false
# (Uses OpenRouter primarily, falls back to Cloudflare if issues)

# Example 4: Cost-Optimized Development
# AI_PROVIDER=auto
# PREFER_FREE_TIER=true
# CLOUDFLARE_MODEL=@cf/meta/llama-3.1-8b-instruct
# OPENROUTER_API_KEY=sk-or-v1-...  # Optional fallback
# (Uses free Cloudflare, falls back to OpenRouter if needed)

# =============================================================================
# COST COMPARISON
# =============================================================================

# Cloudflare Workers AI (Free Tier):
#   - Cost: $0/1K tokens
#   - Limit: 10M tokens/month free
#   - After limit: First 1B tokens free, then pay-as-you-go
#   - Best for: Development, testing, cost-sensitive production
#
# OpenRouter (Premium):
#   - Mistral 7B: $0.0002/1K tokens (~$200/month for 1M tokens)
#   - Claude 3.5 Sonnet: $0.003/$0.015 per 1K tokens
#   - GPT-4o: $0.005/$0.015 per 1K tokens
#   - Best for: Production, high quality required, long context

# Potential Savings: $200-2,400/year using free tier
