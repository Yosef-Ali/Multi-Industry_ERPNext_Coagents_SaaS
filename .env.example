# ============================================================================
# Cloudflare Configuration
# ============================================================================
CLOUDFLARE_ACCOUNT_ID=5a34e22d045e4ff3538a636317a631e8
CLOUDFLARE_API_TOKEN=  # Get from: https://dash.cloudflare.com/profile/api-tokens

# ============================================================================
# OpenRouter API (Anthropic-compatible endpoint)
# ============================================================================
# Get API key from: https://openrouter.ai/keys
OPENROUTER_API_KEY=  # sk-or-v1-xxxxxxxxxxxxx
OPENROUTER_MODEL=zhipu/glm-4-9b-chat  # or any model from https://openrouter.ai/models
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# ============================================================================
# ERPNext Configuration
# ============================================================================
# Local ERPNext (Docker) or Cloud ERPNext (Frappe Cloud)
ERPNEXT_BASE_URL=http://localhost:8080
ERPNEXT_API_URL=http://localhost:8080
ERPNEXT_API_KEY=
ERPNEXT_API_SECRET=

# Mock mode for testing without ERPNext
USE_MOCK_ERPNEXT=false

# ============================================================================
# Service Ports (Local Development)
# ============================================================================
GATEWAY_PORT=3000
GATEWAY_HOST=0.0.0.0
WORKFLOW_SERVICE_PORT=8001
WORKFLOW_SERVICE_HOST=0.0.0.0
WORKFLOW_SERVICE_URL=http://localhost:8001
GENERATOR_SERVICE_PORT=8002
GENERATOR_SERVICE_HOST=0.0.0.0

# ============================================================================
# Redis/KV Configuration
# ============================================================================
# Use KV in production, Redis optional for local dev
REDIS_URL=redis://localhost:6379
REDIS_TTL=86400

# ============================================================================
# Session Configuration
# ============================================================================
SESSION_SECRET=change-this-in-production
SESSION_TTL_MINUTES=30
SESSION_CLEANUP_INTERVAL_MINUTES=5
MAX_CONCURRENT_SESSIONS=20

# ============================================================================
# Security & CORS
# ============================================================================
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:8080,https://erpnext-coagent-ui.pages.dev

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_REQUESTS_PER_SECOND=10
RATE_LIMIT_REQUESTS=10
RATE_LIMIT_WINDOW_MS=1000

# ============================================================================
# Performance
# ============================================================================
BATCH_SIZE_LIMIT=50
STREAM_TIMEOUT_MS=400

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=info
LOG_DIR=./logs
LOG_ROTATION_SIZE=100M
LOG_RETENTION_DAYS=30

# ============================================================================
# Frontend Configuration
# ============================================================================
VITE_GATEWAY_URL=http://localhost:3000
# After deployment: https://erpnext-agent-gateway.workers.dev

# ============================================================================
# Industry Modules
# ============================================================================
ENABLED_INDUSTRIES=hotel,hospital,manufacturing,retail,education

# ============================================================================
# Cloudflare KV Namespace IDs (from setup)
# ============================================================================
KV_SESSIONS_ID=eec1ac4c36d14839a7574b41c0ffa339
KV_WORKFLOW_STATE_ID=  # Run: pnpm dlx wrangler kv namespace create WORKFLOW_STATE
KV_APPROVALS_ID=  # Run: pnpm dlx wrangler kv namespace create APPROVALS

# ============================================================================
# Cloudflare R2 Buckets
# ============================================================================
R2_GENERATED_APPS_BUCKET=erpnext-generated-apps
R2_UPLOADS_BUCKET=erpnext-uploads

# ============================================================================
# Deployment URLs (after deployment)
# ============================================================================
AGENT_GATEWAY_URL=  # https://erpnext-agent-gateway.workers.dev
WORKFLOWS_URL=  # https://erpnext-workflows.workers.dev
GENERATOR_URL=  # https://erpnext-generator.workers.dev
FRONTEND_URL=  # https://erpnext-coagent-ui.pages.dev

# ============================================================================
# Workflow Configuration
# ============================================================================
WORKFLOW_DEFAULT_TIMEOUT=600000
WORKFLOW_MAX_RETRIES=3
WORKFLOW_CHECKPOINTER=inmemory  # inmemory or postgres

# PostgreSQL for production workflow persistence (optional)
# DATABASE_URL=postgresql://erpnext:erpnext@localhost:5432/erpnext_workflows

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_APPROVAL_GATE=true
ENABLE_WORKFLOWS=true
ENABLE_GENERATOR=false
ENABLE_ANALYTICS=true
DEBUG=false
NODE_ENV=development
